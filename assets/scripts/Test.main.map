{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./main.ts","webpack:///./display.ts"],"names":[],"mappings":"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","file":"Test.main.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"main\"] = factory();\n\telse\n\t\troot[\"Test\"] = root[\"Test\"] || {}, root[\"Test\"][\"main\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","import {Display , IHexagonGameState, IVector2, ICellSnapshot, IPlayer} from './display';\r\n\r\n\r\n\r\n\r\nwindow.addEventListener('load', () => {\r\n    let playerCounts = 25;\r\n    let fps = 25;\r\n    let fpsInterval = 1000/fps;\r\n\r\n\r\n\r\n    createEverything(playerCounts);\r\n    const displays = [new Display(document.getElementById('cnvs') as HTMLCanvasElement, {height: 500, width: 500}),\r\n    new Display(document.getElementById('cnvs2') as HTMLCanvasElement, {height: 500, width: 500}),\r\n    new Display(document.getElementById('cnvs3') as HTMLCanvasElement, {height: 500, width: 500}),\r\n    new Display(document.getElementById('cnvs4') as HTMLCanvasElement, {height: 500, width: 500})];\r\n\r\n    document.getElementById('playerCount').addEventListener('keyup', (e) => {\r\n        var value = +(document.getElementById('playerCount') as HTMLInputElement).value;\r\n        if(value >= 1){\r\n            displays.forEach(d => {\r\n                d.newPlayerCount();\r\n            })\r\n            playerCounts = value;\r\n\r\n            createEverything(playerCounts);\r\n            \r\n        }\r\n\r\n    })\r\n\r\n    document.getElementById('fps').addEventListener('keyup' ,(e) => {\r\n        var value = +(document.getElementById('fps') as HTMLInputElement).value;\r\n        if(value >= 1){\r\n\r\n            fps = value;\r\n            fpsInterval = 1000/fps;\r\n\r\n\r\n            \r\n        }\r\n    })\r\n\r\n    const update = () => {\r\n        const now = Date.now();\r\n        const elapsed = now - then;\r\n\r\n        displays.forEach(d => {\r\n            d.update(getRandomBoard(playerCounts));\r\n            if(elapsed > fpsInterval){\r\n                d.draw();\r\n                then = now - (elapsed % fpsInterval);\r\n            }\r\n        });\r\n\r\n\r\n        window.requestAnimationFrame(update);\r\n    }\r\n\r\n    let then = Date.now();\r\n    let startTime = then;\r\n\r\n    update();\r\n    \r\n});\r\n\r\n\r\nlet startLocations : IVector2[];\r\nlet board : ICellSnapshot[];\r\nconst createEverything = (playerCount : number) => {\r\n        for(let i = 0 ; i < playerCount ; i++){\r\n        players[i] = {\r\n            id : i,\r\n            color : getRandomColor()\r\n        };\r\n    }\r\n\r\n\r\n    startLocations = getStartLocations(playerCount);\r\n    const furthestPlayer = furthestPoint();\r\n    for(let i = 0 ; i < startLocations.length ; i++){\r\n        startLocations[i].x + furthestPlayer;\r\n        startLocations[i].y + furthestPlayer;\r\n    }\r\n\r\n    board = buildBoard()\r\n}\r\n\r\nconst buildBoard = () : ICellSnapshot[]=> {\r\n    const cells : ICellSnapshot[] = [];\r\n    let furest = furthestPoint();\r\n    let negativeFurthest = furest;\r\n    let positiveFurthest = furest;\r\n\r\n    for(let i = 0 ; i <= furest ; i++){\r\n        for(let j = -negativeFurthest; j <= positiveFurthest; j++){\r\n            if(i !== 0){\r\n                cells.push({\r\n                    location : {x : -i + furest,y : j + furest},\r\n                    resources : 0,\r\n                    ownedBy : null\r\n                });\r\n\r\n            }\r\n\r\n            cells.push({\r\n                location : {x : i + furest, y : j + furest},\r\n                resources : 0,\r\n                ownedBy : null\r\n            });\r\n        }\r\n        if(i % 2 === furest % 2){\r\n            positiveFurthest--;\r\n        }\r\n        else{\r\n            negativeFurthest--;\r\n        }\r\n    }\r\n\r\n    return cells;\r\n} \r\n\r\n\r\nconst getStartLocations = (areaCount : number) : IVector2[] => {\r\n    const locationArray : IVector2[]= Array(areaCount);\r\n\r\n    locationArray[0] = {x : 0, y : 0}\r\n\r\n    for (var index = 1; index < areaCount; index++) {\r\n        locationArray[index] = getNextBestLocation(locationArray);\r\n        \r\n    }\r\n\r\n    return locationArray;\r\n}\r\n\r\nconst getNextBestLocation = (locationArray : IVector2[]) : IVector2  => {\r\n    const nonZeroCounts = locationArray.filter(l => l.x !== 0 && l.y !== 0).length;\r\n    for(let i = 0 ; i <= nonZeroCounts ; i++){\r\n        let startingLocation = locationArray[i];\r\n        for(let j = 0 ; j < layoutCoordinates.length ; j++){\r\n            const currentlyAvailableLocation = getNextAvailableCoordinate(startingLocation, locationArray);\r\n            if(currentlyAvailableLocation.x !== 0 && currentlyAvailableLocation.y !== 0){\r\n                return currentlyAvailableLocation;\r\n            }\r\n        }\r\n    }\r\n\r\n    return getNextBestLocation(locationArray);\r\n}\r\n\r\nconst getNextAvailableCoordinate = (startingPoint : IVector2, locationArray : IVector2[]) : IVector2 => {\r\n    let result : IVector2 = {x : 0, y : 0};\r\n    for(let i = 0; i < 6 ; i++){\r\n        if(locationArray.filter(p => p.x === startingPoint.x + layoutCoordinates[i].x && p.y === startingPoint.y + layoutCoordinates[i].y).length < 1){\r\n            result = {x : startingPoint.x + layoutCoordinates[i].x , y : startingPoint.y + layoutCoordinates[i].y};\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n\r\nconst layoutCoordinates : IVector2[] = [\r\n    {x : 0, y :-4},\r\n    {x : -4, y :-2},\r\n    {x : 4, y :-2},\r\n    {x : 0, y :4},\r\n    {x : 4, y :2},\r\n    {x : -4, y :2},\r\n\r\n];\r\nlet players : {[id : number] : IPlayer} = {};\r\n\r\n\r\nconst getRandomBoard = (playerCount : number) : IHexagonGameState => {\r\n   \r\n\r\n\r\n\r\n    board.forEach((c, i) => {\r\n        c.ownedBy = Math.floor(Math.random() * playerCount),\r\n        c.resources = Math.round(Math.random() * 100)\r\n    });\r\n\r\n    return {\r\n        cells : board,\r\n        players : players\r\n    };\r\n\r\n    \r\n    \r\n}\r\n\r\nfunction getRandomColor() {\r\n  var letters = '0123456789ABCDEF';\r\n  var color = '#';\r\n  for (var i = 0; i < 6; i++) {\r\n    color += letters[Math.floor(Math.random() * 16)];\r\n  }\r\n  return color;\r\n}\r\n\r\nconst furthestPoint = () : number => {\r\n    const xCoords = startLocations.map(l => l.x);\r\n    const yCoords = startLocations.map(l => l.y);\r\n\r\n\r\n    return Math.max(...[\r\n        Math.abs(Math.max(...yCoords) - startLocations[0].y),\r\n        Math.abs(Math.min(...yCoords) - startLocations[0].y),\r\n        Math.abs(Math.max(...xCoords) - startLocations[0].x),\r\n        Math.abs(Math.min(...xCoords) - startLocations[0].x),\r\n    ]) + 2;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./main.ts","import * as d3 from 'd3';\r\n\r\n\r\ninterface ILatestTransform{\r\n    x : number;\r\n    y : number;\r\n    k : number;\r\n    shouldUse : boolean;\r\n}\r\nexport class Display {\r\n    \r\n    private readonly context : CanvasRenderingContext2D;\r\n    private readonly dataContainer : d3.Selection<any,any,any,any>;\r\n    private scalingFactor : IVector2 = {x : 1, y : 1};\r\n    private latestTransform : ILatestTransform = {x : 0, y : 0, k : 0, shouldUse : false}\r\n    private isFirstMessage : boolean = true;\r\n    private maxCoords : IVector2 = {x : 0, y : 0}\r\n    private minCoords : IVector2 = {x : 0, y : 0}\r\n    private zoomBehaviour : d3.ZoomBehavior<any,any>;\r\n    private dims : {height : number, width : number} = {height : 500, width : 500}\r\n    /**\r\n     *\r\n     */\r\n    constructor(private readonly canvas : HTMLCanvasElement, dims : {height : number, width : number}) {\r\n        this.dims = dims;\r\n        \r\n        this.zoomBehaviour = d3.zoom().on('zoom', () => this.zoom());\r\n        d3.select(canvas).attr('height', dims.height).attr('width', dims.width).call(this.zoomBehaviour);\r\n       this.context = canvas.getContext('2d');\r\n        this.dataContainer = d3.select(document.createElement('custom'));\r\n    }\r\n\r\n    private zoom(){\r\n        //this.context.save();\r\n        this.latestTransform = {x : d3.event.transform.x, y : d3.event.transform.y, k : d3.event.transform.k, shouldUse : true};\r\n\r\n        //this.context.restore();\r\n    }\r\n    public update(gameState : IHexagonGameState){\r\n\r\n        if(this.isFirstMessage){\r\n            const xCoords = gameState.cells.map(c => c.location.x);\r\n            const yCoords = gameState.cells.map(c => c.location.y);\r\n            this.minCoords = {\r\n                x : Math.min(...xCoords),\r\n                y : Math.min(...yCoords)\r\n            }\r\n\r\n            this.maxCoords = {\r\n                x : Math.max(...xCoords),\r\n                y : Math.max(...yCoords)\r\n            }\r\n        }\r\n\r\n\r\n        const dataBinding = this.dataContainer.selectAll('hexagon').data(gameState.cells.map((c) : IHexData => {\r\n            const pos = this.calculateCellPosition(c.location.x, c.location.y);\r\n            return {\r\n                x: pos.x,\r\n                y : pos.y,\r\n                color : c.ownedBy != null ? gameState.players[c.ownedBy].color : '#9e9e9e',\r\n                playerId : c.ownedBy,\r\n                resources : c.resources\r\n            }\r\n        }));\r\n\r\n        const dataEnter = dataBinding.enter().append('hexagon');\r\n        dataBinding.exit().remove();\r\n        \r\n        dataBinding.merge(dataEnter)\r\n        .attr('x', d => d.x)\r\n        .attr('y', d=>d.y)\r\n        .attr('color', d=>d.color)\r\n        .attr('resources', d=> d.resources);\r\n\r\n        \r\n\r\n    }\r\n\r\n    public newPlayerCount(){\r\n        this.isFirstMessage = true;\r\n        this.latestTransform.shouldUse = true;\r\n        this.latestTransform.k = 1;\r\n        this.latestTransform.x = 0;\r\n        this.latestTransform.y = 0\r\n    }\r\n\r\n\r\n    private setInitialZoom(){\r\n        const bbox : {height : number, width : number} = {\r\n            width : (this.maxCoords.x - this.minCoords.x) * hexagonDims.width,\r\n            height : (this.maxCoords.y - this.minCoords.y) * hexagonDims.height\r\n        }\r\n\r\n        if(bbox.height === 0 || bbox.width === 0){\r\n            return;\r\n        }\r\n\r\n        let scalingFactor = this.dims.height <=  this.dims.width ? this.dims.height / bbox.height : this.dims.width / bbox.width;\r\n        scalingFactor *= 0.8;\r\n        const scaleTransform = d3.zoomIdentity.scale(scalingFactor);\r\n        const totalTransform = scaleTransform.translate(0, 0);\r\n\r\n        this.zoomBehaviour.transform( d3.select(this.canvas),totalTransform);\r\n    }\r\n\r\n    public draw(){\r\n        this.context.clearRect(0,0, this.dims.width, this.dims.height);\r\n        this.context.save();\r\n        if(this.isFirstMessage){\r\n            this.setInitialZoom();\r\n            this.isFirstMessage = false;\r\n        }\r\n\r\n        if(this.latestTransform.shouldUse){\r\n            this.context.translate(this.latestTransform.x, this.latestTransform.y)\r\n            this.context.scale(this.latestTransform.k, this.latestTransform.k);\r\n        }\r\n\r\n        var dataElements = this.dataContainer.selectAll('hexagon');\r\n        const ctx = this.context;\r\n        ctx.font = '11pt Arial'\r\n        \r\n        dataElements.each(function(d){\r\n            const node = d3.select(this);\r\n\r\n            ctx.beginPath();\r\n            ctx.fillStyle = node.attr('color');\r\n            const pos = {x : +node.attr('x'), y : +node.attr('y')};\r\n\r\n            ctx.moveTo(pos.x + hexagonPoints[0][0], pos.y + hexagonPoints[0][1]);\r\n            \r\n            for (var index = 1; index < hexagonPoints.length; index++) {\r\n                var point = hexagonPoints[index];\r\n                ctx.lineTo(pos.x + point[0], pos.y + point[1]);\r\n                \r\n            }\r\n            ctx.lineTo(pos.x + hexagonPoints[0][0], pos.y + hexagonPoints[0][1]);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n            ctx.fillStyle = '#000000';\r\n            ctx.fillText(node.attr('resources'), pos.x + 10, pos.y + 20);\r\n\r\n\r\n        });\r\n        \r\n        this.context.restore();\r\n    }\r\n\r\n    \r\n\r\n    private calculateCellPosition(x : number, y: number) : IVector2{\r\n        return {\r\n            x: x * 30 * this.scalingFactor.x,\r\n            y: ((x % 2 ? y * 30 + 15 : y * 30) + 15) * this.scalingFactor.y \r\n        };\r\n    }\r\n}\r\n\r\n\r\nconst hexagonDims : {height : number, width : number} = {\r\n    width : 2 * 15, height : Math.sqrt(3) * 15\r\n}\r\n\r\n\r\nconst hexagonPoints = [[0,15], [10,0], [30, 0], [40,15], [30, 30], [10, 30]];\r\n\r\ninterface IHexData{\r\n    x : number;\r\n    y : number;\r\n    color : string;\r\n    resources : number;\r\n    playerId? : number;\r\n}\r\n\r\nexport interface IHexagonGameState{\r\n    cells : ICellSnapshot[];\r\n    players : {[id:number] : IPlayer}\r\n}\r\n\r\nexport interface ICellSnapshot{\r\n    ownedBy? : number;\r\n    resources : number;\r\n    location : IVector2;\r\n}\r\n\r\nexport interface IPlayer{\r\n    id: number;\r\n    color : string;\r\n}\r\n\r\nexport interface IVector2{\r\n    x : number;\r\n    y : number;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./display.ts"],"sourceRoot":""}